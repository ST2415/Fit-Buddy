<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FitBuddy PWA</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#FF5722">
    <style>
        :root {
            --primary: #FF5722;
            --bg-color: #f4f7f6;
            --text-dark: #333;
            --white: #ffffff;
            --gray: #ccc;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0; padding: 0;
            background-color: var(--bg-color);
            color: var(--text-dark);
            overscroll-behavior-y: none;
        }
        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background: var(--white);
            height: 100vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        /* Header ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô */
        header {
            background: var(--primary); color: var(--white);
            padding: 15px; display: flex; justify-content: space-between; align-items: center;
            font-size: 1.2rem; font-weight: bold; flex-shrink: 0;
        }
        .header-icons span { cursor: pointer; margin-left: 15px; font-size: 1.2rem; }
        
        .content {
            flex-grow: 1; overflow-y: auto; padding: 20px; padding-bottom: 80px;
        }
        .page { display: none; }
        .active-page { display: block; }
        
        input, button, textarea, select { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid var(--gray); box-sizing: border-box; font-size: 1rem; }
        button { background: var(--primary); color: var(--white); border: none; font-weight: bold; cursor: pointer; }
        button:active { opacity: 0.8; }
        .btn-outline { background: transparent; color: var(--primary); border: 2px solid var(--primary); }
        .btn-small { padding: 6px 12px; font-size: 0.9rem; width: auto; margin: 0; }
        
        .card { background: var(--bg-color); padding: 15px; border-radius: 10px; margin-bottom: 15px; display: flex; align-items: center; justify-content: space-between; }
        .profile-pic { width: 50px; height: 50px; background: #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0;}
        .card-info { flex-grow: 1; margin-left: 15px; }
        .card-info h4 { margin: 0 0 5px 0; }
        .card-info p { margin: 0; font-size: 0.85rem; color: #666; }
        
        .chat-box { border: 1px solid #eee; height: 60vh; overflow-y: auto; padding: 10px; border-radius: 8px; background: #fafafa; margin-bottom: 10px; display: flex; flex-direction: column; }
        .msg { margin-bottom: 10px; padding: 10px; border-radius: 8px; max-width: 80%; word-wrap: break-word;}
        .msg.me { background: var(--primary); color: white; align-self: flex-end; border-bottom-right-radius: 0;}
        .msg.other { background: #e0e0e0; align-self: flex-start; border-bottom-left-radius: 0;}

        .navbar {
            display: none; justify-content: space-around; background: var(--white);
            border-top: 1px solid #ddd; padding: 10px 0;
            position: fixed; bottom: 0; width: 100%; max-width: 480px;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
        }
        .navbar button { width: auto; background: none; color: #666; padding: 5px 10px; margin: 0; border: none; font-size: 0.9rem; display: flex; flex-direction: column; align-items: center; gap: 4px;}
        .navbar button.active-nav { color: var(--primary); font-weight: bold; }
        
        /* ‡πÅ‡∏ó‡πá‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ */
        .tabs { display: flex; margin-bottom: 15px; border-bottom: 2px solid #ddd; }
        .tab { flex: 1; text-align: center; padding: 10px; cursor: pointer; font-weight: bold; color: #666; }
        .tab.active { border-bottom: 3px solid var(--primary); color: var(--primary); }
    </style>
</head>
<body>

<div class="app-container">
    <header id="app-header" style="display: none;">
        <span>üí™ FitBuddy</span>
        <div class="header-icons">
            <span onclick="nav('notifications')">üîî</span>
            <span onclick="nav('settings')">‚öôÔ∏è</span>
        </div>
    </header>

    <div class="content">
        <div id="login" class="page active-page">
            <div style="text-align: center; margin-bottom: 30px; margin-top: 50px;">
                <h1 style="color: var(--primary); margin-bottom: 5px;">üí™ FitBuddy</h1>
                <p>‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏∏‡∏ì</p>
            </div>
            <input type="text" id="username" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
            <input type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
            <button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>

        <div id="home" class="page">
            <div class="card" style="background: #fff3e0; border: 1px solid #ffe0b2;">
                <div class="profile-pic" style="background: #FF5722; color: white;">üòé</div>
                <div class="card-info">
                    <h4 id="user-name-display">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h4>
                    <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏∏‡∏¢‡πÄ‡∏™‡∏°‡∏≠! üî•</p>
                </div>
                <button class="btn-outline btn-small" onclick="nav('profile-edit')">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
            </div>

            <button onclick="nav('create-post')" style="font-size: 1.1rem; box-shadow: 0 4px 6px rgba(255,87,34,0.3);">‚ûï ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</button>
            <button class="btn-outline" onclick="nav('history')">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</button>

            <h4 style="margin-top: 20px;">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏∏‡∏ì</h4>
            <div class="card">
                <div class="card-info"><h4>üìç ‡∏™‡∏ß‡∏ô‡∏•‡∏∏‡∏°‡∏û‡∏¥‡∏ô‡∏µ</h4><p>‡∏´‡πà‡∏≤‡∏á‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ 1.2 ‡∏Å‡∏°.</p></div>
            </div>
            <div class="card">
                <div class="card-info"><h4>üìç ‡∏™‡∏ß‡∏ô‡πÄ‡∏ö‡∏ç‡∏à‡∏Å‡∏¥‡∏ï‡∏¥</h4><p>‡∏´‡πà‡∏≤‡∏á‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ 3.5 ‡∏Å‡∏°.</p></div>
            </div>
        </div>

        <div id="find" class="page">
            <h3>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏∏‡∏ì</h3>
            <div id="feed-container">
                </div>
        </div>

        <div id="create-post" class="page">
            <button class="btn-outline" onclick="nav('home')">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
            <h3>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà</h3>
            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏µ‡∏¨‡∏≤</label>
            <select id="post-sport">
                <option value="‡∏ß‡∏¥‡πà‡∏á/‡∏°‡∏≤‡∏£‡∏≤‡∏ò‡∏≠‡∏ô">üèÉ‚Äç‚ôÇÔ∏è ‡∏ß‡∏¥‡πà‡∏á/‡∏°‡∏≤‡∏£‡∏≤‡∏ò‡∏≠‡∏ô</option>
                <option value="‡πÄ‡∏ß‡∏ó‡πÄ‡∏ó‡∏£‡∏ô‡∏ô‡∏¥‡πà‡∏á">üèãÔ∏è‚Äç‚ôÄÔ∏è ‡πÄ‡∏ß‡∏ó‡πÄ‡∏ó‡∏£‡∏ô‡∏ô‡∏¥‡πà‡∏á</option>
                <option value="‡πÅ‡∏ö‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏±‡∏ô">üè∏ ‡πÅ‡∏ö‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏±‡∏ô</option>
                <option value="‡∏õ‡∏±‡πà‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô">üö¥ ‡∏õ‡∏±‡πà‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô</option>
                <option value="‡πÇ‡∏¢‡∏Ñ‡∏∞">üßò‚Äç‚ôÄÔ∏è ‡πÇ‡∏¢‡∏Ñ‡∏∞</option>
            </select>
            <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</label>
            <input type="text" id="post-loc" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏ß‡∏ô‡∏•‡∏∏‡∏°‡∏û‡∏¥‡∏ô‡∏µ, ‡∏ü‡∏¥‡∏ï‡πÄ‡∏ô‡∏™‡πÉ‡∏Å‡∏•‡πâ‡∏ö‡πâ‡∏≤‡∏ô">
            <label>‡πÄ‡∏ß‡∏•‡∏≤</label>
            <input type="text" id="post-time" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ 18:00, ‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏ä‡πâ‡∏≤">
            <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
            <textarea id="post-desc" rows="3" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏≤‡∏Ñ‡∏ô‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏û‡∏ã 6, ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏ß‡∏ó‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏Ñ‡∏£‡∏±‡∏ö"></textarea>
            <button onclick="submitPost()">‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</button>
        </div>

        <div id="history" class="page">
            <button class="btn-outline" onclick="nav('home')">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
            <div class="tabs">
                <div class="tab active" id="tab-myposts" onclick="switchHistoryTab('myposts')">‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</div>
                <div class="tab" id="tab-mymatches" onclick="switchHistoryTab('mymatches')">‡∏ï‡∏≠‡∏ö‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</div>
            </div>
            
            <div id="history-posts-container">
                </div>
            
            <div id="history-matches-container" style="display: none;">
                <div class="card">
                    <div class="profile-pic">üèä‚Äç‚ôÇÔ∏è</div>
                    <div class="card-info">
                        <h4>‡∏Ñ‡∏∏‡∏ì‡∏ö‡∏≠‡∏¢ (‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥)</h4>
                        <p>üìç ‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥ ‡∏Å‡∏Å‡∏ó. | üïí ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</p>
                    </div>
                    <button class="btn-small" onclick="openChat()">‡πÅ‡∏ä‡∏ó</button>
                </div>
            </div>
        </div>

        <div id="profile" class="page">
            <button class="btn-outline" onclick="nav('find')">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö</button>
            <div style="text-align: center; margin: 20px 0;">
                <div id="prof-pic" class="profile-pic" style="width: 80px; height: 80px; font-size: 40px; margin: 0 auto;">üë§</div>
                <h2 id="prof-name">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</h2>
                <p id="prof-sport" style="color: var(--primary); font-weight: bold;">‡∏Å‡∏µ‡∏¨‡∏≤</p>
                <p id="prof-loc">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</p>
            </div>
            <button onclick="openChat()">üí¨ ‡∏ó‡∏±‡∏Å‡πÅ‡∏ä‡∏ó</button>
        </div>

        <div id="chat" class="page">
            <button class="btn-outline" onclick="nav('find')">‚¨Ö ‡∏õ‡∏¥‡∏î‡πÅ‡∏ä‡∏ó</button>
            <h3 id="chat-title" style="margin-top: 10px;">‡πÅ‡∏ä‡∏ó</h3>
            <div class="chat-box" id="chat-history">
                <div class="msg other">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡πÑ‡∏õ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÑ‡∏´‡∏°?</div>
            </div>
            <div style="display: flex; gap: 8px;">
                <input type="text" id="chat-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..." onkeypress="if(event.key === 'Enter') sendMessage()">
                <button style="width: 70px;" onclick="sendMessage()">‡∏™‡πà‡∏á</button>
            </div>
        </div>

        <div id="settings" class="page">
            <button class="btn-outline" onclick="nav('home')">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
            <h3>‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h3>
            <button class="btn-outline" style="text-align: left;">üë§ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</button>
            <button class="btn-outline" style="text-align: left;">üîî ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>
            <button class="btn-outline" style="text-align: left;">üîí ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</button>
            <button style="background: #d32f2f; margin-top: 20px;" onclick="logout()">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>

        <div id="notifications" class="page">
            <button class="btn-outline" onclick="nav('home')">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
            <h3>üîî ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
            <div class="card" style="background: #e3f2fd;">
                <div class="card-info">
                    <h4>üí¨ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å ‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡∏ô</h4>
                    <p>‡πÄ‡∏°‡∏∑‡πà‡∏≠ 5 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</p>
                </div>
            </div>
            <div class="card">
                <div class="card-info">
                    <h4>‚≠ê ‡∏Ñ‡∏∏‡∏ì‡∏ö‡∏≠‡∏¢ ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Ñ‡∏∏‡∏ì 5 ‡∏î‡∏≤‡∏ß</h4>
                    <p>‡πÄ‡∏°‡∏∑‡πà‡∏≠ 2 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</p>
                </div>
            </div>
        </div>

    </div>

    <div id="navbar" class="navbar">
        <button id="nav-home" onclick="nav('home')">üè†<br>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        <button id="nav-find" onclick="nav('find')">üîç<br>‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</button>
        <button id="nav-chat" onclick="nav('chat')">üí¨<br>‡πÅ‡∏ä‡∏ó</button>
    </div>
</div>

<script>
    // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    let currentUser = "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô";
    
    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Feed
    let feedPosts = [
        { id: 1, name: "‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏Å", sport: "üèÉ‚Äç‚ôÇÔ∏è ‡∏ß‡∏¥‡πà‡∏á/‡∏°‡∏≤‡∏£‡∏≤‡∏ò‡∏≠‡∏ô", loc: "‡∏™‡∏ß‡∏ô‡∏•‡∏∏‡∏°‡∏û‡∏¥‡∏ô‡∏µ", time: "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ 18:00", emoji: "üèÉ‚Äç‚ôÇÔ∏è", isMine: false },
        { id: 2, name: "‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡∏ô", sport: "üèãÔ∏è‚Äç‚ôÄÔ∏è ‡πÄ‡∏ß‡∏ó‡πÄ‡∏ó‡∏£‡∏ô‡∏ô‡∏¥‡πà‡∏á", loc: "‡∏ü‡∏¥‡∏ï‡πÄ‡∏ô‡∏™‡πÄ‡∏ã‡πá‡∏ô‡∏ó‡∏£‡∏±‡∏•", time: "‡πÄ‡∏™‡∏≤‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏ä‡πâ‡∏≤", emoji: "üèãÔ∏è‚Äç‚ôÄÔ∏è", isMine: false }
    ];

    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÄ‡∏≠‡∏á
    let myPosts = [];

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
    function init() {
        renderFeed();
        renderMyPosts();
    }

    // ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á
    function nav(pageId) {
        document.querySelectorAll('.page').forEach(page => page.classList.remove('active-page'));
        document.getElementById(pageId).classList.add('active-page');
        
        document.querySelectorAll('.navbar button').forEach(btn => btn.classList.remove('active-nav'));
        let navBtn = document.getElementById('nav-' + pageId);
        if(navBtn) navBtn.classList.add('active-nav');
    }

    // ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
    function login() {
        const userInput = document.getElementById('username').value;
        currentUser = userInput || "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà";
        document.getElementById('user-name-display').innerText = currentUser;
        
        document.getElementById('app-header').style.display = 'flex';
        document.getElementById('navbar').style.display = 'flex';
        nav('home');
    }

    // ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
    function logout() {
        document.getElementById('app-header').style.display = 'none';
        document.getElementById('navbar').style.display = 'none';
        nav('login');
    }

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà
    function submitPost() {
        const sport = document.getElementById('post-sport').value;
        const loc = document.getElementById('post-loc').value || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà";
        const time = document.getElementById('post-time').value || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ß‡∏•‡∏≤";
        
        const newPost = {
            id: Date.now(),
            name: currentUser + " (‡∏â‡∏±‡∏ô)",
            sport: sport,
            loc: loc,
            time: time,
            emoji: "üòé",
            isMine: true
        };

        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡πÉ‡∏ô Feed ‡∏£‡∏ß‡∏° ‡πÅ‡∏•‡∏∞ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
        feedPosts.unshift(newPost); 
        myPosts.unshift(newPost);
        
        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
        renderFeed();
        renderMyPosts();
        
        // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏•‡∏∞‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
        document.getElementById('post-loc').value = '';
        document.getElementById('post-time').value = '';
        document.getElementById('post-desc').value = '';
        
        alert("‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!");
        nav('find'); // ‡πÄ‡∏î‡πâ‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
    }

    // ‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏´‡∏ô‡πâ‡∏≤ Feed (‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô)
    function renderFeed() {
        const container = document.getElementById('feed-container');
        container.innerHTML = '';
        
        feedPosts.forEach(post => {
            container.innerHTML += `
                <div class="card" style="${post.isMine ? 'border: 1px solid var(--primary);' : ''}">
                    <div class="profile-pic">${post.emoji}</div>
                    <div class="card-info">
                        <h4>${post.name} ${post.isMine ? '<span style="color:var(--primary); font-size:0.7rem;">[‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì]</span>' : ''}</h4>
                        <p>${post.sport}</p>
                        <p>üìç ${post.loc} | üïí ${post.time}</p>
                    </div>
                    ${!post.isMine ? `<button class="btn-small" onclick="viewProfile('${post.name}', '${post.sport}', '${post.loc}', '${post.emoji}')">‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>` : `<button class="btn-small btn-outline" disabled>‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</button>`}
                </div>
            `;
        });
    }

    // ‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
    function renderMyPosts() {
        const container = document.getElementById('history-posts-container');
        container.innerHTML = '';
        
        if(myPosts.length === 0) {
            container.innerHTML = '<p style="text-align:center; color:#999; margin-top:20px;">‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</p>';
            return;
        }

        myPosts.forEach(post => {
            container.innerHTML += `
                <div class="card" style="border-left: 4px solid var(--primary);">
                    <div class="card-info">
                        <h4>${post.sport}</h4>
                        <p>üìç ${post.loc} | üïí ${post.time}</p>
                    </div>
                    <button class="btn-small btn-outline" onclick="alert('‡∏•‡∏ö‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÅ‡∏•‡πâ‡∏ß');">‡∏•‡∏ö</button>
                </div>
            `;
        });
    }

    // ‡∏™‡∏•‡∏±‡∏ö‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
    function switchHistoryTab(tabName) {
        document.getElementById('tab-myposts').classList.remove('active');
        document.getElementById('tab-mymatches').classList.remove('active');
        document.getElementById('history-posts-container').style.display = 'none';
        document.getElementById('history-matches-container').style.display = 'none';

        if(tabName === 'myposts') {
            document.getElementById('tab-myposts').classList.add('active');
            document.getElementById('history-posts-container').style.display = 'block';
        } else {
            document.getElementById('tab-mymatches').classList.add('active');
            document.getElementById('history-matches-container').style.display = 'block';
        }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå, ‡πÅ‡∏ä‡∏ó)
    function viewProfile(name, sport, loc, emoji) {
        document.getElementById('prof-name').innerText = name;
        document.getElementById('prof-sport').innerText = sport;
        document.getElementById('prof-loc').innerText = "üìç " + loc;
        document.getElementById('prof-pic').innerText = emoji;
        document.getElementById('chat-title').innerText = "‡πÅ‡∏ä‡∏ó‡∏Å‡∏±‡∏ö " + name;
        nav('profile');
    }

    function openChat() { nav('chat'); }

    function sendMessage() {
        const input = document.getElementById('chat-input');
        const text = input.value.trim();
        if (!text) return;
        const chatBox = document.getElementById('chat-history');
        const myMsg = document.createElement('div');
        myMsg.className = 'msg me'; myMsg.innerText = text;
        chatBox.appendChild(myMsg);
        input.value = ''; chatBox.scrollTop = chatBox.scrollHeight;
        setTimeout(() => {
            const replyMsg = document.createElement('div');
            replyMsg.className = 'msg other'; replyMsg.innerText = "‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö!";
            chatBox.appendChild(replyMsg); chatBox.scrollTop = chatBox.scrollHeight;
        }, 1000);
    }

    // ‡∏£‡∏±‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
    init();

</script>

</body>
</html>